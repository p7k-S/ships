cmake_minimum_required(VERSION 3.10)

project(GameProject)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(SFML 2.5 REQUIRED graphics window system network)

include_directories(
    ${CMAKE_SOURCE_DIR}/src/game
    ${CMAKE_SOURCE_DIR}/src/render
    ${CMAKE_SOURCE_DIR}/src/render/map
    ${CMAKE_SOURCE_DIR}/src/textures
    ${CMAKE_SOURCE_DIR}/src/net
)

# ОБЩИЕ ИСХОДНЫЕ ФАЙЛЫ (используются и сервером и клиентом)
set(COMMON_SOURCES
    src/game/map/GenerateMap.cpp
    src/game/map/MapFuncs.cpp
    src/game/troops/BaseTroop.cpp
    src/game/buildings/BaseBuild.cpp
    src/game/entity/EntityFuncs.cpp
    src/game/GameConfig.cpp
    src/game/GameLogic.cpp
    src/net/Client.cpp
    src/net/Server.cpp
)

# ФАЙЛЫ ТОЛЬКО ДЛЯ СЕРВЕРА
set(SERVER_SOURCES
    src/server_main.cpp           # новый файл для сервера
    src/game/ServerGame.cpp       # новый класс ServerGame
    ${COMMON_SOURCES}
)

# ФАЙЛЫ ТОЛЬКО ДЛЯ КЛИЕНТА  
set(CLIENT_SOURCES
    src/client_main.cpp           # новый файл для клиента  
    src/game/ClientGame.cpp       # новый класс ClientGame
    src/game/Game.cpp
    src/game/GameInit.cpp
    src/game/GameRender.cpp
    src/game/GameEvents.cpp 
    src/game/GameMap.cpp 
    src/game/GameUtils.cpp
    src/render/ui/UIRenderer.cpp
    src/textures/EmbeddedResources.cpp
    ${COMMON_SOURCES}
)

# СОЗДАЕМ ДВА ОТДЕЛЬНЫХ ИСПОЛНЯЕМЫХ ФАЙЛА
add_executable(GameServer ${SERVER_SOURCES})
target_link_libraries(GameServer PRIVATE sfml-system sfml-network)

add_executable(GameClient ${CLIENT_SOURCES})
target_link_libraries(GameClient PRIVATE sfml-graphics sfml-window sfml-system sfml-network)
